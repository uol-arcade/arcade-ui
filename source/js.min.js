/* enki dashboard js, @author: Benjamin Williams */
function showNotification(e,t){$(".notification h1").html(e),$(".notification p").html(t),$(".notification").show(),setTimeout(function(){$(".notification").hide()},5e3)}window.addEventListener("load",e=>{arcade.vue_games=new Vue({el:".games.screen",data:{currentIndex:0,games:[{title:"Adi's Maze Unlimited",genre:"Platformer",players:2,imagePath:"assets/images/adis-maze.png",author:"Benjamin Williams",description:"Lorem ipsum dolor, sit amet consectetur elit. Sunt a mazime iste.",path:"pacman-unlimited"},{title:"Qong",genre:"Sports",players:1,imagePath:"assets/images/qong.png",author:"Benjamin Williams",description:"Lorem ipsum dolor, sit amet consectetur elit. Sunt a mazime iste. Lorem. Ipsum.",path:"qong"}]},mounted:function(){arcade.keys.on("keyLeft",this.$el,this.left),arcade.keys.on("keyRight",this.$el,this.right),arcade.keys.on("keyA",this.$el,this.A),arcade.keys.on("keyB",this.$el,this.B)},methods:{transitionOut(e){let t=document.querySelector(".game");t.classList.contains("transitionIn")||t.classList.contains("transitionOut")||(t.classList.toggle("transitionOut"),window.setTimeout(e.bind(this),600))},transitionIn(e){let t=document.querySelector(".game");t.classList.toggle("transitionOut"),t.classList.toggle("transitionIn"),window.setTimeout(()=>{t.classList.toggle("transitionIn")},1500)},A(){let e=this.$el.querySelector(".key.info.primary kbd");e.classList.contains("pressed")||(e.classList.toggle("pressed"),window.setTimeout(()=>{e.classList.toggle("pressed")},500),arcade.launchGame(this.currentGame.path,500))},B(){let e=this.$el.querySelector(".key.info.secondary kbd");e.classList.contains("pressed")||(e.classList.toggle("pressed"),window.setTimeout(()=>{e.classList.toggle("pressed")},500))},left(){0!=this.currentIndex&&this.transitionOut(function(){this.currentIndex--,this.transitionIn()})},right(){this.currentIndex!=this.games.length-1&&this.transitionOut(function(){this.currentIndex++,this.transitionIn()})}},computed:{currentGame(){return this.games[this.currentIndex]}},filters:{formatPlayers:e=>1==e?e+" player":e>1?"1-"+e+" players":void 0}})});var CheatDetector=function(){window.addEventListener("keydown",this.onKeyDown.bind(this)),this.cheats=[],this.map=[]};CheatDetector.prototype.mapKey=function(e,t){if("string"==typeof e)this.map.push({char:e,key:t});else if(void 0!==e.length&&void 0!==t.length)for(var n=0;n<e.length;n++)this.map.push({char:e[n],key:t[n]});return this},CheatDetector.prototype.onKeyDown=function(e){for(var t=String.fromCharCode(e.keyCode).toLowerCase(),n=0;n<this.map.length;n++)this.map[n].key==e.keyCode&&(t=this.map[n].char);for(n=0;n<this.cheats.length;n++)this.processCheat(t,this.cheats[n])},CheatDetector.prototype.onCheat=function(e,t){this.cheats.push({code:e.toLowerCase(),counter:0,name:"n/a",callback:t})},CheatDetector.prototype.onCheatEx=function(e,t,n){this.cheats.push({code:e.toLowerCase(),name:t,counter:0,callback:n})},CheatDetector.prototype.processCheat=function(e,t){e==t.code[t.counter]?(t.counter++,t.counter>=t.code.length&&(t.counter=0,t.callback({code:t.code,name:t.name}))):t.counter=0};var cheatDetector=new CheatDetector;cheatDetector.mapKey(["a","b","c","d","e","f"],[70,71,72,74,75,76]),cheatDetector.onCheat("deadbeef",function(e){document.querySelector(".debug.screen").classList.toggle("hidden")}),cheatDetector.onCheat("cafe",function(e){document.querySelector(".version-info").classList.toggle("hidden")}),Math.clamp=((e,t,n)=>Math.max(t,Math.min(e,n))),arcade.launchGame=function(e,t=0){setTimeout(function(){window.location.href="games/"+e},t)},arcade.keys={},arcade.keys.currentListener=null,arcade.keys.keyLeftEvent=new Event("keyLeft"),arcade.keys.keyRightEvent=new Event("keyRight"),arcade.keys.keyAEvent=new Event("keyA"),arcade.keys.keyBEvent=new Event("keyB"),arcade.keys.dispatchEvents=(e=>{null!=arcade.keys.currentListener&&("ArrowLeft"==e.code?arcade.keys.currentListener.dispatchEvent(arcade.keys.keyLeftEvent):"ArrowRight"==e.code?arcade.keys.currentListener.dispatchEvent(arcade.keys.keyRightEvent):"KeyZ"==e.code?arcade.keys.currentListener.dispatchEvent(arcade.keys.keyAEvent):"KeyX"==e.code&&arcade.keys.currentListener.dispatchEvent(arcade.keys.keyBEvent))}),arcade.keys.on=((e,t,n)=>{t.addEventListener(e,n)}),window.addEventListener("keydown",arcade.keys.dispatchEvents.bind(this)),window.addEventListener("load",()=>{arcade.keys.currentListener=arcade.vue_games.$el});