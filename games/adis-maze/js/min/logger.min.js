var Logger=function(){window.addEventListener("load",function(){this.reset()}.bind(this))},seed=0;
Logger.prototype.reset=function(){var a=[10239024,2595169,5656916,936102,15227496,16030318];seed=a[Math.floor(Math.random()*a.length)];Math.seedrandom(seed);console.log("%cmaze seed: "+seed,"background-color:#333;padding:2px;color:#bada55");this.fingerprint=this.getFingerPrint();this.data={};this.startData=this.getStartData(seed);this.plays=[];this.playerSteps=[];this.enemyDistances=[];this.waypoint="";this.firebase=firebase.database().ref("adis-maze/"+this.fingerprint)};
Logger.prototype.update=function(){if(!game.ended&&!game.won){for(var a={},b=0;b<enemies.length;b++)a[enemies[b].name]=Math.abs(enemies[b].x-playerPos.x)+Math.abs(enemies[b].y-playerPos.y);"undefined"==typeof this.enemyDistances&&(this.enemyDistances=[]);this.enemyDistances.push(a)}};Logger.prototype.addPlayerStep=function(a,b){a={x:a,y:b,time:+new Date-this.startData.time};this.update();this.playerSteps.push(a)};
Logger.prototype.pushObject=function(){this.startData.graph=graph;this.firebase.push({info:this.startData,levels:this.plays})};Logger.prototype.onWin=function(){this.plays.push({win:{score:score},playerSteps:this.playerSteps,waypoints:this.waypoint,enemyDistances:this.enemyDistances});this.pushObject();this.playerSteps=[];this.waypoint="";this.enemyDistances=[]};
Logger.prototype.onDeath=function(a,b){this.plays.push({death:{aiType:a.aiType,name:a.name,score:score},playerSteps:this.playerSteps,waypoints:this.waypoint,enemyDistances:this.enemyDistances});b&&this.pushObject();this.playerSteps=[];this.waypoint="";this.enemyDistances=[]};Logger.prototype.addJunction=function(a){this.waypoint+=""+a+";"};Logger.prototype.getStartData=function(a){var b={};b.seed=a;b.time=+new Date;return b};Logger.prototype.getFingerPrint=function(){return(new ClientJS).getFingerprint()};
